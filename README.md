# Huffman архиватор, C-версия

Архиватор находится в `huffman.c`, CLI оболочка в `main.c`. Собирается через gcc на Windows с mingw:

```
gcc -Wall -o main main.c
./main some-input-file some-output-encoded-file
```

Теоретически должно собираться так же и на Linux

# Huffman архиватор и разархиватор, TypeScript версия для nodejs

Ядро находится в `huffman.ts`, CLI оболочка в `main.ts`. Для запуска нужен nodejs и typescript, можно предварительно собирать в js либо запускать сразу с `ts-node`

```
ts-node -T main.ts encode some-input-file some-output-encoded-file
ts-node -T main.ts decode some-input-encoded-file some-output-decoded-file
```

# Тесты

Тесты проверяют сжатие обоими версиями (C и TS), проверяют что файл распаковывается и такое же. См в `test.sh`

# Формат сжатого файла

Первые 4 байта - заголовок, фиксированные случайно выбранные 4 байта
Далее 4 байта - размер оригинального файла.
После этого идёт поток битов для описания дерева. Дерево записывается простым обходом. Если это внутренний узел, то записать бит 0. Если это лист, то записать бит 1 и далее 8 битов на соответствующий байт. Всего должно получиться 255 внутренних узлов и 256 листов, т.е. `255*1 + 256*(1 + 8) = 2559 битов`. После этого идёт контрольный нулевой бит для того чтобы заголовок закончился на байте.
Далее идёт поток битов для самих данных.

# WebAssembly версия

Собирается с emscripten в `buildWeb.sh`, доступна по адресу <https://roginvs.github.io/huffman_coding/web/>
